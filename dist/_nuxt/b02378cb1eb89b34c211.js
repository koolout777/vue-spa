(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{196:function(t,e,o){"use strict";o.r(e);o(25),o(14),o(15),o(9),o(22);var n=o(10),r=o(116),l=o(4);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function h(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var d={components:{Breadcrumbs:r.a},computed:h(h(h(h({},Object(l.c)("user",["getAuth","getLogin"])),Object(l.c)("input",["getIsPosted"])),Object(l.c)("notification",["getAlertOpen","getAlertType","getAlertResult"])),Object(l.c)("post",["getPostData","getPostState"])),data:function(){return{postTitle:"",postContent:"",postImage:"",postDate:""}},watch:{getIsPosted:function(){null!=this.getIsPosted&&(this.getIsPosted?this.getPostState.isCreate?(this.$router.push("/"),this.setNotification("Post created successfully.")):(this.$router.push("/news/"+this.getPostData.id),this.setNotification("Post updated successfully.")):this.setNotification("Unable to post. Unauthorized login."),this.setIsPosted(null))},getAlertResult:function(){1==this.getAlertResult&&"edit"==this.getAlertType?(this.$router.push("/news/"+this.getPostData.id),this.setAlertType(""),this.setAlertResult(null)):0==this.getAlertResult&&"edit"==this.getAlertType&&(this.setAlertType(""),this.setAlertResult(null)),1==this.getAlertResult&&"create"==this.getAlertType?(this.$router.push("/"),this.setAlertType(""),this.setAlertResult(null)):0==this.getAlertResult&&"create"==this.getAlertType&&(this.setAlertType(""),this.setAlertResult(null))}},fetch:function(){this.postTitle=null==this.getPostData.title?"":this.getPostData.title,this.postContent=null==this.getPostData.content?"":this.getPostData.content,this.postImage=null==this.getPostData.image?"":this.getPostData.image,this.postDate=null==this.getPostData.createdAt?"":this.getPostData.createdAt,this.postTitle?this.setPostState({isCreate:!1,isUpdate:!0}):this.setPostState({isCreate:!0,isUpdate:!1})},beforeRouteLeave:function(t,e,o){this.setPostData([]),o()},methods:h(h(h(h(h({},Object(l.b)("input",["createPost","updatePost"])),Object(l.d)("input",["setIsPosted"])),Object(l.d)("post",["setPostData","setPostState"])),Object(l.d)("notification",["setNotification","setAlertOpen","setAlertType","setAlertMsg","setAlertResult"])),{},{doGetDate:function(){var t=new Date;return t.getFullYear()+"."+("0"+(t.getMonth()+1)).slice(-2)+"."+("0"+t.getDate()).slice(-2)},previewFiles:function(t){var e=this,o=t.target.files[0],n=new FileReader;o&&n.readAsDataURL(o),n.onloadend=function(){e.postImage=n.result}},doPost:function(){""!=this.postTitle&&""!=this.postContent&&(this.getPostState.isUpdate?this.updatePost({id:this.getPostData.id,image:this.postImage,title:this.postTitle,content:this.postContent,authHeader:this.getAuth}):this.createPost({title:this.postTitle,content:this.postContent,image:this.postImage,authHeader:this.getAuth}),this.resetFields())},resetFields:function(){this.postTitle="",this.postContent=""},doAlert:function(data){"edit"==data?(this.setAlertMsg("Discard post edit?"),this.setAlertOpen(!0),this.setAlertType("edit")):"create"==data&&(this.setAlertMsg("Discard post create?"),this.setAlertOpen(!0),this.setAlertType("create"))}})},P=o(5),component=Object(P.a)(d,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Breadcrumbs",{attrs:{isCreate:t.getPostState.isCreate}}),t._v(" "),o("div",{staticClass:"input"},["true"==t.getLogin?o("div",{staticClass:"input__wrapper l-container"},[o("div",{staticClass:"input__edit"},[o("button",{staticClass:"input__edit-link input__edit-link--save",on:{click:t.doPost}},[t._v("Save Post")]),t._v(" "),t.getPostState.isCreate?o("a",{staticClass:"input__edit-link",on:{click:function(e){return t.doAlert("create")}}},[t._v("Cancel")]):t._e(),t._v(" "),t.getPostState.isUpdate?o("a",{staticClass:"input__edit-link",on:{click:function(e){return t.doAlert("edit")}}},[t._v("Cancel")]):t._e()]),t._v(" "),t.getPostState.isCreate?o("p",{staticClass:"input__date"},[t._v(t._s(this.doGetDate()))]):t._e(),t._v(" "),t.getPostState.isUpdate?o("p",{staticClass:"input__date"},[t._v(t._s(t.getPostData.createdAt?t.getPostData.createdAt.match(/^([\S]+)/g).toString().replace(/[[\]]/g,""):""))]):t._e(),t._v(" "),o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.postTitle,expression:"postTitle"}],ref:"ctitle",staticClass:"input__title",attrs:{placeholder:"Title"},domProps:{value:t.postTitle},on:{input:function(e){e.target.composing||(t.postTitle=e.target.value)}}}),t._v(" "),o("div",{staticClass:"input__image",style:{backgroundImage:"url("+t.postImage+")"}},[o("label",{staticClass:"input__button"},[o("input",{staticClass:"input__button--hide",attrs:{type:"file"},on:{change:t.previewFiles}}),t._v("\n          UPLOAD IMAGE\n        ")])]),t._v(" "),o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.postContent,expression:"postContent"}],ref:"cinput",staticClass:"input__content",attrs:{placeholder:"Content"},domProps:{value:t.postContent},on:{input:function(e){e.target.composing||(t.postContent=e.target.value)}}})]):t._e()])],1)}),[],!1,null,null,null);e.default=component.exports}}]);